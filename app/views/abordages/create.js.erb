function refreshAbordageForm(){
  var newAbordageForms = document.querySelectorAll(".to-reset");
  newAbordageForms.forEach((f) => f.value = "");
  document.querySelector(".to-reset-int").value = 1;
}

function updateAbordageList(newContent){
  document.getElementById("messages").insertAdjacentHTML("beforeend", newContent);
}

function updateStatus(newContent){
  document.getElementById("status-update").innerHTML = newContent;
}

<% if @abordage.errors.any? %>
  refreshAbordageForm();
<% else %>
  if (document.getElementById("new-abordage-modal")){
    if (!document.getElementById("new-abordage-modal").classList.contains("modal-hidden")){
      document.getElementById("new-abordage-modal").classList.add("modal-hidden");
    }
  }

  updateAbordageList( '<%= j render "abordages/list_item", abordage: @abordage, active: true %>' );
  updateStatus( '<%= j render "abordages/status", tresor: @tresor %>' );
  refreshAbordageForm();
<% end %>
